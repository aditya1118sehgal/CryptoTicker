<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>
            CryptoTicker
        </title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <script type="text/javascript" src="http://localhost:5000/socket.io/socket.io.js"></script>
    </head>
    <style>
    body {
      color: white;
      background-color:black;
      font-size: 24px
    }
</style>
    <script type="text/javascript">
        'use strict';
        $(document).ready(function() {
          var HIGHLIGHT_TIME = 2000;
            var ticker = location.hash.substr(1);
            var socket = io.connect('http://adisraspi.ddns.me:7777');
              socket.emit('ticker', ticker);
              socket.on(ticker, function(response) {
                var responseParts = response.split(':');
                var text = responseParts[0];
                var isUp = responseParts[1]==='+';
                var isDown = responseParts[1]==='-';
                  var data = $('<pre>' + text + '</pre><hr />');
                  $('#quotes').append(data);
                  $('html, body').animate({ scrollTop: $(document).height() }, 100);
                  if(isUp){
                    $(data).show('slide', { direction: 'up' }, 300);
                    $(data).effect("highlight", {color: 'green'}, HIGHLIGHT_TIME);
                  }
                  else {
                    if(isDown) {
                      $(data).show('slide', { direction: 'down' }, 300);
                      $(data).effect("highlight", {color: 'red'}, HIGHLIGHT_TIME);
                    }
                    else {
                      $(data).show('slide', { direction: 'down' }, 300);
                      $(data).effect("highlight", {color: 'yellow'}, HIGHLIGHT_TIME);
                    }

                  }
              });
            $(window).on('hashchange', function() {
              var ticker = location.hash.substr(1);
              socket.emit('ticker', ticker);
            });
        });
    </script>
    <body>
        <div id="quotes"></div>
    </body>
</html>
